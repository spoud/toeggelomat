{"ast":null,"code":"import { select } from '@ngrx/store';\nimport { SubscriptionHelper } from '../utils/subscription-helper';\nimport { MatchWithPlayers } from '../entities/match';\nimport { combineLatest } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nconst _c0 = [\"confirm\"];\nfunction CurrentMatchComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function CurrentMatchComponent_div_6_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const s_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      ctx_r4.redScore = s_r3;\n      return i0.ɵɵresetView(ctx_r4.autoFill());\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"selected\", s_r3 === ctx_r0.redScore);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(s_r3);\n  }\n}\nfunction CurrentMatchComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function CurrentMatchComponent_div_38_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const s_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      ctx_r7.blueScore = s_r6;\n      return i0.ɵɵresetView(ctx_r7.autoFill());\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r6 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"selected\", s_r6 === ctx_r1.blueScore);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(s_r6);\n  }\n}\nexport let CurrentMatchComponent = /*#__PURE__*/(() => {\n  class CurrentMatchComponent extends SubscriptionHelper {\n    constructor(store) {\n      super();\n      this.store = store;\n      this.blueScoreList = [8, 7, 6, 5, 4, 3, 2, 1, 0];\n      this.redScoreList = [0, 1, 2, 3, 4, 5, 6, 7, 8];\n      this.blueScore = -1;\n      this.redScore = -1;\n    }\n    ngOnInit() {\n      this.addSubscription(combineLatest([this.store.pipe(select('matches'), select('currentMatch')), this.store.pipe(select('players'), select('list'))]).subscribe(arr => this.currentMatch = MatchWithPlayers.createMatchWithPlayer(arr[0], arr[1])));\n    }\n    ngOnDestroy() {\n      this.unsubscribeAll();\n    }\n    saveScore() {\n      if (this.currentMatch) {\n        const match = Object.assign({}, this.currentMatch.match);\n        match.blueScore = this.blueScore;\n        match.redScore = this.redScore;\n        this.currentMatch.match = match;\n        this.confirmDialog.confirmMatchResult(this.currentMatch);\n      }\n    }\n    autoFill() {\n      if (this.blueScore === -1 && this.redScore !== 7) {\n        this.blueScore = 7;\n      }\n      if (this.redScore === -1 && this.blueScore !== 7) {\n        this.redScore = 7;\n      }\n    }\n    static #_ = this.ɵfac = function CurrentMatchComponent_Factory(t) {\n      return new (t || CurrentMatchComponent)(i0.ɵɵdirectiveInject(i1.Store));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CurrentMatchComponent,\n      selectors: [[\"app-current-match\"]],\n      viewQuery: function CurrentMatchComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.confirmDialog = _t.first);\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n      decls: 41,\n      vars: 9,\n      consts: [[1, \"buttons-container\"], [\"type\", \"button\", \"routerLink\", \"/scoreboard\", 1, \"btn\", \"btn-secondary\", \"btn-lg\"], [\"type\", \"button\", 1, \"save-score-button\", \"btn\", \"btn-primary\", \"btn-lg\", 3, \"disabled\", \"click\"], [1, \"score-list\"], [\"class\", \"score-item red-team-backgroundcolor\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"match-container\"], [1, \"red-players\", \"red-team-color\"], [1, \"defense\"], [1, \"offense\"], [\"src\", \"assets/soccer-table.png\", 1, \"soccer-field\"], [1, \"blue-players\", \"blue-team-color\"], [\"class\", \"score-item blue-team-backgroundcolor\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"confirm\", \"\"], [1, \"score-item\", \"red-team-backgroundcolor\", 3, \"click\"], [1, \"score-item\", \"blue-team-backgroundcolor\", 3, \"click\"]],\n      template: function CurrentMatchComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n          i0.ɵɵtext(2, \"Cancel\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function CurrentMatchComponent_Template_button_click_3_listener() {\n            return ctx.saveScore();\n          });\n          i0.ɵɵtext(4, \"Save score \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(5, \"div\", 3);\n          i0.ɵɵtemplate(6, CurrentMatchComponent_div_6_Template, 2, 3, \"div\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"div\", 7);\n          i0.ɵɵtext(10);\n          i0.ɵɵelement(11, \"br\")(12, \"br\");\n          i0.ɵɵtext(13, \" Defense \");\n          i0.ɵɵelement(14, \"br\");\n          i0.ɵɵtext(15);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 8);\n          i0.ɵɵelement(17, \"br\")(18, \"br\");\n          i0.ɵɵtext(19, \" Offense\");\n          i0.ɵɵelement(20, \"br\");\n          i0.ɵɵtext(21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(22, \"img\", 9);\n          i0.ɵɵelementStart(23, \"div\", 10)(24, \"div\", 8);\n          i0.ɵɵtext(25);\n          i0.ɵɵelement(26, \"br\")(27, \"br\");\n          i0.ɵɵtext(28, \" Offense\");\n          i0.ɵɵelement(29, \"br\");\n          i0.ɵɵtext(30);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"div\", 7);\n          i0.ɵɵelement(32, \"br\")(33, \"br\");\n          i0.ɵɵtext(34, \" Defense \");\n          i0.ɵɵelement(35, \"br\");\n          i0.ɵɵtext(36);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(37, \"div\", 3);\n          i0.ɵɵtemplate(38, CurrentMatchComponent_div_38_Template, 2, 3, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(39, \"app-score-confirmation-modal\", null, 12);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", ctx.currentMatch && (ctx.redScore === -1 || ctx.blueScore === -1));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.redScoreList);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" Points: \", ctx.currentMatch == null ? null : ctx.currentMatch.match.potentialRedPoints, \" \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.currentMatch == null ? null : ctx.currentMatch.playerRedDefense.nickName, \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\" \", ctx.currentMatch == null ? null : ctx.currentMatch.playerRedOffense.nickName, \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" Points: \", ctx.currentMatch == null ? null : ctx.currentMatch.match.potentialBluePoints, \" \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.currentMatch == null ? null : ctx.currentMatch.playerBlueOffense.nickName, \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\" \", ctx.currentMatch == null ? null : ctx.currentMatch.playerBlueDefense.nickName, \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.blueScoreList);\n        }\n      },\n      styles: [\".buttons-container[_ngcontent-%COMP%]{text-align:center}.buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px}.match-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:2em}.blue-players[_ngcontent-%COMP%], .red-players[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:10px}.red-players[_ngcontent-%COMP%]{text-align:right}.offense[_ngcontent-%COMP%], .defense[_ngcontent-%COMP%], .soccer-field[_ngcontent-%COMP%]{flex:1}.score-list[_ngcontent-%COMP%]{display:flex;justify-content:center}.score-item[_ngcontent-%COMP%]{margin:10px;display:block;border:1px solid white;border-radius:20px;width:50px;height:50px;text-align:center;vertical-align:middle;font-size:2em;cursor:pointer}.score-item.selected[_ngcontent-%COMP%]{background:#fff;color:#000}.potential-points[_ngcontent-%COMP%]{margin-top:20px;text-align:center;font-size:2em}\"]\n    });\n  }\n  return CurrentMatchComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}