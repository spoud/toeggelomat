{"ast":null,"code":"import { SubscriptionHelper } from '../../utils/subscription-helper';\nimport { select } from '@ngrx/store';\nimport { MatchWithPlayers } from '../../entities/match';\nimport { combineLatest } from 'rxjs';\nimport { DatePipe } from \"@angular/common\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nfunction LastMatchesComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const match_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 7, match_r1.match.matchTime, \"dd.MM.yyyy H:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", match_r1.winners[0].nickName, \", \", match_r1.winners[1].nickName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", match_r1.loosers[0].nickName, \", \", match_r1.loosers[1].nickName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(match_r1.score);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(match_r1.match.points);\n  }\n}\nexport class MatchWithWinnerLooser extends MatchWithPlayers {\n  constructor(matchWithPlayers) {\n    super(matchWithPlayers.match);\n    Object.assign(this, matchWithPlayers);\n    this.blueWon = this.match.blueScore > this.match.redScore;\n  }\n  get winners() {\n    if (this.blueWon) {\n      return [this.playerBlueDefense, this.playerBlueOffense];\n    } else {\n      return [this.playerRedDefense, this.playerRedOffense];\n    }\n  }\n  get loosers() {\n    if (this.blueWon) {\n      return [this.playerRedDefense, this.playerRedOffense];\n    } else {\n      return [this.playerBlueDefense, this.playerBlueOffense];\n    }\n  }\n  get score() {\n    if (this.blueWon) {\n      return `${this.match.blueScore}-${this.match.redScore}`;\n    } else {\n      return `${this.match.redScore}-${this.match.blueScore}`;\n    }\n  }\n}\nexport let LastMatchesComponent = /*#__PURE__*/(() => {\n  class LastMatchesComponent extends SubscriptionHelper {\n    constructor(store) {\n      super();\n      this.store = store;\n    }\n    ngOnInit() {\n      this.addSubscription(combineLatest([this.store.pipe(select('matches'), select('lastMatches')), this.store.pipe(select('players'), select('list'))]).subscribe(arr => {\n        this.matches = arr[0].map(m => new MatchWithWinnerLooser(MatchWithPlayers.createMatchWithPlayer(m, arr[1])));\n      }));\n    }\n    ngOnDestroy() {\n      this.unsubscribeAll();\n    }\n    static #_ = this.ɵfac = function LastMatchesComponent_Factory(t) {\n      return new (t || LastMatchesComponent)(i0.ɵɵdirectiveInject(i1.Store));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LastMatchesComponent,\n      selectors: [[\"app-last-matches\"]],\n      standalone: true,\n      features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n      decls: 15,\n      vars: 1,\n      consts: [[1, \"table\", \"table-striped\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function LastMatchesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"table\", 0)(1, \"thead\")(2, \"tr\")(3, \"th\", 1);\n          i0.ɵɵtext(4, \"Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"th\", 1);\n          i0.ɵɵtext(6, \"Winner\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"th\", 1);\n          i0.ɵɵtext(8, \"Looser\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"th\", 1);\n          i0.ɵɵtext(10, \"Score\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"th\", 1);\n          i0.ɵɵtext(12, \"Points\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(13, \"tbody\");\n          i0.ɵɵtemplate(14, LastMatchesComponent_tr_14_Template, 12, 10, \"tr\", 2);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngForOf\", ctx.matches);\n        }\n      },\n      dependencies: [DatePipe]\n    });\n  }\n  return LastMatchesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}