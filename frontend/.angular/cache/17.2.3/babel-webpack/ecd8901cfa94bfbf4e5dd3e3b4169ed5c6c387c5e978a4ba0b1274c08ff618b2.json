{"ast":null,"code":"import { select } from '@ngrx/store';\nimport { startMatch } from '../store/matches/maches.actions';\nimport { SubscriptionHelper } from '../utils/subscription-helper';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nfunction PlayersSelectionComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵlistener(\"click\", function PlayersSelectionComponent_div_11_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const player_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.selectPlayer(player_r1));\n    });\n    i0.ɵɵelement(1, \"app-spoud-avatar\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const player_r1 = ctx.$implicit;\n    i0.ɵɵclassProp(\"selected\", player_r1.selected);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"email\", player_r1.player.email);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", player_r1.player.nickName, \" \");\n  }\n}\nexport class SelectablePlayer {\n  constructor(player, selected = false) {\n    this.player = player;\n    this.selected = selected;\n  }\n}\nexport let PlayersSelectionComponent = /*#__PURE__*/(() => {\n  class PlayersSelectionComponent extends SubscriptionHelper {\n    constructor(store) {\n      super();\n      this.store = store;\n      this.enoughToStart = false;\n      this.playerCount = 0;\n    }\n    ngOnInit() {\n      this.addSubscription(this.store.pipe(select('players'), select('list')).subscribe(list => {\n        this.players = list.slice().sort((l, r) => l.nickName.localeCompare(r.nickName)).map(p => new SelectablePlayer(p));\n        this.updateConditions();\n      }));\n    }\n    ngOnDestroy() {\n      this.unsubscribeAll();\n    }\n    updateConditions() {\n      this.playerCount = this.players.filter(p => p.selected).length;\n      this.enoughToStart = this.playerCount >= 4;\n    }\n    selectPlayer(player) {\n      player.selected = !player.selected;\n      this.updateConditions();\n    }\n    startMatch() {\n      this.store.dispatch(startMatch({\n        playerUuids: this.players.filter(p => p.selected).map(p => p.player.uuid)\n      }));\n    }\n    static #_ = this.ɵfac = function PlayersSelectionComponent_Factory(t) {\n      return new (t || PlayersSelectionComponent)(i0.ɵɵdirectiveInject(i1.Store));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PlayersSelectionComponent,\n      selectors: [[\"app-players-selection\"]],\n      standalone: true,\n      features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n      decls: 12,\n      vars: 3,\n      consts: [[1, \"jumbotron\"], [1, \"display-3\"], [1, \"lead\"], [\"type\", \"button\", \"routerLink\", \"scoreboard\", 1, \"btn\", \"btn-secondary\", \"btn-lg\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"disabled\", \"click\"], [1, \"player-list\"], [\"class\", \"player\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"player\", 3, \"click\"], [3, \"email\"]],\n      template: function PlayersSelectionComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"Who's in ?\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"p\", 2);\n          i0.ɵɵtext(4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 2)(6, \"button\", 3);\n          i0.ɵɵtext(7, \"Cancel\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function PlayersSelectionComponent_Template_button_click_8_listener() {\n            return ctx.startMatch();\n          });\n          i0.ɵɵtext(9, \"Start\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(10, \"div\", 5);\n          i0.ɵɵtemplate(11, PlayersSelectionComponent_div_11_Template, 3, 4, \"div\", 6);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\"\", ctx.playerCount, \" Players selected \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", !ctx.enoughToStart);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.players);\n        }\n      },\n      styles: [\"div.jumbotron[_ngcontent-%COMP%]{margin:auto;text-align:center;padding:5px}.lead[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}.btn-primary[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#375a7f;border-color:#375a7f;width:10rem}.btn-lg[_ngcontent-%COMP%], .btn-group-lg[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{font-size:1rem;line-height:2rem;padding:.5rem 1rem;border-radius:.3rem;width:10rem}.player-list[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-wrap:wrap;justify-content:space-around}.player[_ngcontent-%COMP%]{font-size:1.5em;flex:1 1 350px;height:60px;background:#303030;cursor:pointer;margin:10px;border-radius:.3rem;padding:10px}.player.selected[_ngcontent-%COMP%]{background:#375a7f}\"]\n    });\n  }\n  return PlayersSelectionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}